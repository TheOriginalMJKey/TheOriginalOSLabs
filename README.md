# Лабораторная работа №1

## Цель работы

Приобретение практических навыков в:
- Управление процессами в ОС
- Обеспечение обмена данных между процессами посредством каналов

## Задание

Составить и отладить программу на языке Си, осуществляющую работу с процессами и взаимодействие между ними в одной из двух операционных систем. В результате работы программа (основной процесс) должна создать для решения задачи один или несколько дочерних процессов. Взаимодействие между процессами осуществляется через системные сигналы/события и/или каналы (pipe).

Необходимо обрабатывать системные ошибки, которые могут возникнуть в результате работы.

Родительский процесс создает дочерний процесс. Первой строчкой пользователь в консоль родительского процесса пишет имя файла, которое будет передано при создании дочернего процесса. Родительский и дочерний процесс должны быть представлены разными программами.

Родительский процесс передает команды пользователя через pipe1, который связан с стандартным входным потоком дочернего процесса. Дочерний процесс при необходимости передает данные в родительский процесс через pipe2. Результаты своей работы дочерний процесс пишет в созданный им файл. Допускается просто открыть файл и писать туда, не перенаправляя стандартный поток вывода.

### Вариант задания

Пользователь вводит команды вида: «число<endline>». Далее это число передается от родительского процесса в дочерний. Дочерний процесс производит проверку на простоту. Если число составное, то это число записывается в файл. Если число отрицательное или простое, тогда дочерний и родительский процессы завершаются.

## Описание работы программ

### Родительская программа

Родительская программа выполняет следующие действия:

1. Создает два канала (pipe) для взаимодействия с дочерним процессом.
2. Создает дочерний процесс с помощью функции `fork`.
3. В дочернем процессе перенаправляет стандартный ввод и вывод на соответствующие концы каналов.
4. В родительском процессе закрывает ненужные концы каналов.
5. Запрашивает у пользователя имя файла и передает его дочернему процессу через первый канал.
6. Открывает файл для записи.
7. В бесконечном цикле запрашивает у пользователя числа и передает их дочернему процессу через первый канал.
8. Читает ответ от дочернего процесса через второй канал.
9. Если ответ указывает на завершение работы (число отрицательное или простое), завершает работу.
10. Если ответ указывает на продолжение работы, записывает число в файл.
11. Закрывает файл и каналы перед завершением работы.

### Дочерняя программа

Дочерняя программа выполняет следующие действия:

1. Читает имя файла из стандартного ввода (первый канал).
2. Открывает файл для записи.
3. В бесконечном цикле читает числа из стандартного ввода (первый канал).
4. Проверяет, является ли число отрицательным или простым.
5. Если число отрицательное или простое, отправляет сигнал родительскому процессу о завершении работы и завершает свою работу.
6. Если число составное, записывает его в файл и отправляет сигнал родительскому процессу о продолжении работы.
7. Закрывает файл перед завершением работы.
